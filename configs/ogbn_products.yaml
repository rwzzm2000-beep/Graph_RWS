# Graph_RWS/configs/ogbn_products.yaml

# ================= [1. 基础环境与数据集] =================
dataset:
  source: ogb
  name: ogbn-products
  root: ./dataset

# BCSR 结构参数
tile_rows: 16
tile_cols: 8
warps_per_block: 8

# ================= [2. 训练模式控制] =================
# 可选模式: 'DPS' | 'DAPS' | 'node' | 'full'
train_mode: DPS

# ================= [3. 预处理策略配置] =================
# 预处理模式: 'rcm' | 'metis' | 'none'
# - rcm: 使用 Reverse Cuthill-McKee 算法重排序 (适合 Node 模式，提升缓存命中)
# - metis: 使用 METIS 图分割重排序 (适合 BAPS/DPS 模式，也可用于 Node 模式对比)
# - none: 不进行预处理 (使用原始图 ID)
preprocess_mode: none

# METIS 专用参数 (仅当 preprocess_mode: metis 时生效)
metis:
  num_partitions: 100

# ================= [4. 模式专用配置板块] =================

# [Mode: DPS] 动态分区采样配置
DPS:
  # seed_budget: 50       # 每次探测的种子 Window 数量
  use_metis: true       # true=使用METIS预处理; false=使用RCM预处理 (Reddit推荐true)
  
  # ----- 动态补偿策略一，种子增量法 -----
  # 1. 动态负载均衡参数
  max_partition_edges: 500000 
  
  # 2. 探测步长
  probe_step_size: 20

  # 3. 策略选择
  # 选项: 'seed_increment' (原策略: 仅包含采样到的边)
  # 选项: 'induced_growth' (新策略: 包含子图内所有的边)
  strategy: induced_growth
  # ------------------------------------

# [Mode: DAPS] 动态块对齐分区配置 (原 BAPS)
DAPS:
  # num_partitions: 100      # 宏观分区数量
  batch_partition_size: 30 # 每次训练的分区数
  # 注意: DAPS 模式下强制使用 METIS，无需额外开关

# [Mode: node] 点采样配置
node:
  batch_size: 8192

# [Mode: full] 全图训练配置
full:
  # 全图模式通常不需要额外参数，使用默认即可
  pass

# ================= [5. GNN 模型结构] =================
fanouts: [10, 10, 5]          # Reddit 邻居多，2层足够
hidden_size: 128
num_classes: 47
dropout: 0.5
residual: true
normalize_features: true 

# ================= [6. 训练超参数] =================
epochs: 200
lr: 0.003
weight_decay: 0.0
patience: 50
eval_interval: 5
use_scheduler: true

# ================= [7. 系统与保存设置] =================
use_uva: false
use_checkpoint: false

save_model: true
save_path: Graph_RWS/save_models/
save_result: true
result_path: Graph_RWS/results/

